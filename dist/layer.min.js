/*!
 * @autofe/layer v0.3.1
 * (c) 2018 Autohome Inc.
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t.AutoFE=t.AutoFE||{},t.AutoFE.Layer=e(t.jQuery))}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e="layer",o="fe.layer",i="."+o,n=t.fn[e],a={SHOW:"show"+i,SHOWN:"shown"+i,HIDE:"hide"+i,HIDDEN:"hidden"+i,RESIZE:"resize"+i,CLICK_DISMISS:"click.dismiss"+i,KEYDOWN_DISMISS:"keydown.dismiss"+i,CLICK_DATA_API:"click"+i+".data-api"},s='[data-toggle="layer"]',r='[data-dismiss="layer"]';function d(e,o){this.options=t.extend({},d.Default,o),this.$elem=t(e),this.$back=null,this.isShown=!1,this.isFixed=!0,this.$elem.css({zIndex:1001})}function c(e,i){return this.each(function(){var n=t(this),a=n.data(o),s=t.extend({},d.Default,n.data(),"object"==typeof e&&e);if(a||(a=new d(this,s),n.data(o,a)),"string"==typeof e){if("undefined"==typeof a[e])throw new TypeError('No method named "'+e+'"');a[e](i)}else s.show&&a.show(i)})}return d.Default={keyboard:!0,backdrop:!0,opacity:.5,show:!0,time:0},d.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},d.prototype.show=function(e){var o=this;if(!o.isShown){var i=t.Event(a.SHOW,{relatedTarget:e});o.$elem.trigger(i),o.isShown||i.isDefaultPrevented()||(o.isShown=!0,this._adjust(),o._setEscapeEvent(),o._setResizeEvent(),o.$elem.on(a.CLICK_DISMISS,r,t.proxy(o.hide,o)),o._setBackdrop(function(){o.$elem.css({display:"block"}),o._effect("fadeIn",function(){var i=t.Event(a.SHOWN,{relatedTarget:e});o.$elem.trigger(i);var n=o.options.time;n>0&&setTimeout(function(){o.hide()},n)})}))}},d.prototype.hide=function(e){var o=this;if(e&&e.preventDefault(),o.isShown){var i=t.Event(a.HIDE);o.$elem.trigger(i),o.isShown&&!i.isDefaultPrevented()&&(o.isShown=!1,o._setEscapeEvent(),o._setResizeEvent(),o.$elem.off(a.CLICK_DISMISS),o._effect("fadeOut",function(){o.$elem.css({display:"none"}),o._setBackdrop(),o.$elem.trigger(a.HIDDEN)}))}},d.prototype.handleUpdate=function(){this._adjust()},d.prototype._adjust=function(){var e=t(window).width(),o=t(window).height(),i=this.$elem.outerWidth(),n=this.$elem.outerHeight(),a={left:(e-i)/2};this.isFixed=!(n>o),this.isFixed?(a.position="fixed",a.top=(o-n)/2):(a.position="absolute",a.top=t(window).scrollTop()),this.$elem.css(a)},d.prototype._setEscapeEvent=function(){var e=this;e.options.keyboard&&(e.isShown?t(document).on(a.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):t(document).off(a.KEYDOWN_DISMISS))},d.prototype._setResizeEvent=function(){this.isShown?t(window).on(a.RESIZE,t.proxy(this.handleUpdate,this)):t(window).off(a.RESIZE)},d.prototype._setBackdrop=function(e){var o=this,i=o.options;i.backdrop?o.isShown?(o.$back=t('<div style="position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;background:#000;opacity:0;"></div>').appendTo(document.body),"lock"!==i.backdrop&&o.$back.on(a.CLICK_DISMISS,t.proxy(o.hide,o)),o.$back.animate({opacity:i.opacity},150,e)):o.$back&&o.$back.animate({opacity:0},150,function(){o.$back.off(a.CLICK_DISMISS),o.$back.remove(),o.$back=null,e&&e()}):e&&e()},d.prototype._effect=function(t,e){switch(t){case"fadeIn":this.$elem.stop(!0).css({marginTop:-30,opacity:0}).animate({marginTop:0,opacity:1},300,e);break;case"fadeOut":this.$elem.stop(!0).animate({marginTop:-30,opacity:0},300,e)}},t(document).on(a.CLICK_DATA_API,s,function(e){var i=t(this),n=t(i.attr("data-target")),a=n.data(o)?"toggle":t.extend({},n.data(),i.data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault(),c.call(n,a,this)}),t.fn[e]=c,t.fn[e].Constructor=d,t.fn[e].noConflict=function(){return t.fn[e]=n,c},d});