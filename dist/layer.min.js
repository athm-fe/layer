/*!
 * layer v0.1.0
 * (c) 2018 Autohome Inc.
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t.AutoFE=t.AutoFE||{},t.AutoFE.Layer=e(t.jQuery))}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="layer",i="fe.layer",n="."+i,a=t.fn[o],s={SHOW:"show"+n,SHOWN:"shown"+n,HIDE:"hide"+n,HIDDEN:"hidden"+n,RESIZE:"resize"+n,CLICK_DISMISS:"click.dismiss"+n,KEYDOWN_DISMISS:"keydown.dismiss"+n,CLICK_DATA_API:"click"+n+".data-api"},r='[data-toggle="layer"]',d='[data-dismiss="layer"]';function f(e,o){this.options=t.extend({},f.Default,o),this.$elem=t(e),this.$back=null,this.isShown=!1,this.isFixed=!0,this.$elem.css({zIndex:1001})}function c(o,n){return this.each(function(){var a=t(this),s=a.data(i),r=t.extend({},f.Default,a.data(),"object"===("undefined"==typeof o?"undefined":e(o))&&o);if(s||(s=new f(this,r),a.data(i,s)),"string"==typeof o){if("undefined"==typeof s[o])throw new TypeError('No method named "'+o+'"');s[o](n)}else r.show&&s.show(n)})}return f.Default={keyboard:!0,backdrop:!0,opacity:.5,show:!0},f.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},f.prototype.show=function(e){var o=this;if(!o.isShown){var i=t.Event(s.SHOW,{relatedTarget:e});o.$elem.trigger(i),o.isShown||i.isDefaultPrevented()||(o.isShown=!0,this._adjust(),o._setEscapeEvent(),o._setResizeEvent(),o.$elem.on(s.CLICK_DISMISS,d,t.proxy(o.hide,o)),o._setBackdrop(function(){o.$elem.css({display:"block"});var i=t.Event(s.SHOWN,{relatedTarget:e});o.$elem.trigger(i),o._effect("fadeIn")}))}},f.prototype.hide=function(e){var o=this;if(e&&e.preventDefault(),o.isShown){var i=t.Event(s.HIDE);o.$elem.trigger(i),o.isShown&&!i.isDefaultPrevented()&&(o.isShown=!1,o._setEscapeEvent(),o._setResizeEvent(),o.$elem.off(s.CLICK_DISMISS),o._effect("fadeOut",function(){o.$elem.css({display:"none"}),o._setBackdrop(),o.$elem.trigger(s.HIDDEN)}))}},f.prototype.handleUpdate=function(){this._adjust()},f.prototype._adjust=function(){var e=t(window).width(),o=t(window).height(),i=this.$elem.outerWidth(),n=this.$elem.outerHeight(),a={left:(e-i)/2};this.isFixed=!(n>o),this.isFixed?(a.position="fixed",a.top=(o-n)/2):(a.position="absolute",a.top=t(window).scrollTop()),this.$elem.css(a)},f.prototype._setEscapeEvent=function(){var e=this;e.options.keyboard&&(e.isShown?t(document).on(s.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):t(document).off(s.KEYDOWN_DISMISS))},f.prototype._setResizeEvent=function(){this.isShown?t(window).on(s.RESIZE,t.proxy(this.handleUpdate,this)):t(window).off(s.RESIZE)},f.prototype._setBackdrop=function(e){var o=this,i=o.options;i.backdrop?o.isShown?(o.$back=t('<div style="position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;background:#000;opacity:0;"></div>').appendTo(document.body),"lock"!==i.backdrop&&o.$back.on(s.CLICK_DISMISS,t.proxy(o.hide,o)),o.$back.animate({opacity:i.opacity},150,e)):o.$back&&o.$back.animate({opacity:0},150,function(){o.$back.off(s.CLICK_DISMISS),o.$back.remove(),o.$back=null,e&&e()}):e&&e()},f.prototype._effect=function(t,e){switch(t){case"fadeIn":this.$elem.stop(!0).css({marginTop:-30,opacity:0}).animate({marginTop:0,opacity:1},300,e);break;case"fadeOut":this.$elem.stop(!0).animate({marginTop:-30,opacity:0},300,e)}},t(document).on(s.CLICK_DATA_API,r,function(e){var o=t(this),n=t(o.attr("data-target")),a=n.data(i)?"toggle":t.extend({},n.data(),o.data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault(),c.call(n,a,this)}),t.fn[o]=c,t.fn[o].Constructor=f,t.fn[o].noConflict=function(){return t.fn[o]=a,c},f});